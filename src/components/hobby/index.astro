---
import { cn } from '@/lib/utils'
import HobbyItem from './hobby-item.astro'
import { hobbies } from './hobbies.astro'

const { class: className, ...props } = Astro.props
---

<section class={cn('w-full py-16', className)} {...props}>
  <div id="hobbies-section" class="container px-4 md:px-6">
    <div
      class="flex flex-col items-center justify-center space-y-8 text-center"
    >
      <div class="space-y-4">
        <h2
          id="hobbies-title"
          class="text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl"
        >
          My Hobbies
        </h2>
        <p
          id="hobbies-description"
          class="max-w-[900px] text-xl text-muted-foreground md:text-2xl/relaxed"
        >
          Discover the diverse range of interests that fuel my passion and
          creativity.
        </p>
      </div>
      <div
        id="hobbies-grid"
        class="grid grid-cols-2 gap-6 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"
      >
        {
          hobbies.map((hobby) => (
            <HobbyItem
              icon={hobby.icon}
              label={hobby.label}
              description={hobby.description}
              mediaUrl={hobby.mediaUrl}
            />
          ))
        }
      </div>

      <a
        href="/journey"
        id="go-journey"
        class:list={[
          'inline-flex h-9 w-96 items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50',
          'bg-primary text-primary-foreground shadow hover:bg-primary/90',
        ]}>See My Journey</a
      >
    </div>
  </div>
</section>

<script>
  import { animate, stagger, inView } from 'motion'

  const hobbiesSection = document.getElementById('hobbies-section')
  const hobbiesTitle = document.getElementById('hobbies-title')
  const hobbiesDescription = document.getElementById('hobbies-description')
  const hobbiesGrid = document.getElementById('hobbies-grid')
  const goJourney = document.getElementById('go-journey')

  if (
    hobbiesSection &&
    hobbiesTitle &&
    hobbiesDescription &&
    hobbiesGrid &&
    goJourney
  ) {
    inView(hobbiesSection, () => {
      animate(
        hobbiesTitle,
        { opacity: [0, 1], y: [20, 0] },
        { duration: 0.5, delay: 0.2 }
      )
      animate(
        hobbiesDescription,
        { opacity: [0, 1], y: [20, 0] },
        { duration: 0.5, delay: 0.3 }
      )

      animate(
        Array.from(hobbiesGrid.children),
        { opacity: [0, 1], y: [20, 0] },
        { duration: 0.5, delay: stagger(0.1) }
      )

      animate(goJourney, { opacity: [0, 1] }, { duration: 0.5, delay: 0.6 })
    })
  }
</script>
